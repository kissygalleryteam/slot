/*!build time : 2014-11-27 11:04:45 AM*/
KISSY.add("kg/slot/2.0.1/index",function(a,b){function c(a,b,c,e){this.items=d(a).all(".slot-item"),this.itemHeight=b,this.itemSize=c,this.cfg=e,this.initializer()}var d=b.all;return c.prototype={_speed:20,_movePx:0,initializer:function(){var a=this;a._setMovePx(),a._specifySort(),a._setSpeed()},_setSpeed:function(){var a=this;a._speed=a.cfg&&a.cfg.speed?a.cfg.speed:30},_setMovePx:function(){var a=this;a._movePx=a.itemHeight/4},_gamgeStatus:!1,start:function(){var a=this;a._gamgeStatus=!0,a._stopPos=[],a._setStartTime();for(var b=a.itemSize.length,c=a.randomNub(a.getArrData(0,b),b),e=0;b>e;e++)!function(b){setTimeout(function(){var e=c[b];a._scroll(d(a.items.item(e)),e)},200*b)}(e),a._scrollStatus[e]=!0;delete a._callback},_setStartTime:function(){var a=this,b=a._speed,c=this._movePx;a._speed=2*b,a._movePx=a.itemHeight/10,setTimeout(function(){a._speed=1.2*b,a._movePx=a.itemHeight/6},600),setTimeout(function(){a._speed=b,a._movePx=c},1e3)},stop:function(a,b){var c=this;c._callback=b,c._setStopTime(function(){c._setStopPos(a)})},_setStopTime:function(a){var b=this,c=b._speed,d=this._movePx;b._tmpSpeed=c,b._tmpMovePx=d,b._speed=1.1*c,b._movePx=b.itemHeight/6,setTimeout(function(){b._speed=1.2*c,b._movePx=b.itemHeight/10},600),setTimeout(function(){a()},1e3)},_scrollStatus:[],_updateScrollStatus:function(a){var b=this;b._scrollStatus[a]=!1,-1==b._scrollStatus.join("").indexOf("true")&&b._callback&&(b._speed=b._tmpSpeed,b._movePx=b._tmpMovePx,delete b._tmpSpeed,delete b._tmpMovePx,b._callback())},_pos:[],_stopPos:[],_setStopPos:function(a){for(var b=this,c=0,d=b.items.length;d>c;c++)b._stopPos[c]=a[c]>b.itemSize[c]-1?0:a[c]},_scroll:function(a,b){var c=this,d=parseInt(c._pos[b]-c._movePx),e=c.itemSize[b],f=c.itemHeight;return-d>e*f&&(d=e*f+d),a.css("background-position-y",d),Math.abs(c._stopPos[b]*f+d)<f/10?(d=-c._stopPos[b]*f,a.css("background-position-y",d),c._pos[b]=d,void c._updateScrollStatus(b)):void setTimeout(function(){c._pos[b]=d,c._scroll(a,b)},c._speed)},_specifySort:function(){var a=this,b=a.itemSize.length,c=a.itemHeight,e=a.items,f=a.cfg.defaultSort;if(!f||f.length<b){f=[];for(var g=0;b>g;g++)f[g]=a.randomNub(a.getArrData(0,a.itemSize[g]),1)}else for(var g=0;b>g;g++)f[g]>a.itemSize[g]&&(f[g]=a.itemSize[g]);for(var g=0;b>g;g++){var h=-f[g]*c;d(e.item(g)).css("background-position-y",-f[g]*c),a._pos[g]=h}},getArrData:function(a,b){for(var c=[],d=a;b>d;d++)c.push(d);return c},randomNub:function(a,b){var c=[];for(i=0;b>i;i++){var d=Math.floor(Math.random()*a.length);c.push(a[d]),a.splice(d,1)}return c}},c},{requires:["node","base"]});